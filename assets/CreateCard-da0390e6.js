import{d as ne,r as o,e as ce,u as de,j as e}from"./index-5afd821c.js";import{c as ue,a as me,j as pe}from"./createLucideIcon-6899df1c.js";import{C as Z}from"./check-circle-1e39d727.js";import{A as P}from"./alert-circle-c446cba2.js";import{U as W,D as xe}from"./upload-0b183ac5.js";import{X as ge}from"./x-c8f8eefc.js";import{S as be}from"./save-89a13c28.js";const he=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),_e=()=>{ne();const F=o.useRef(null),[s,$]=o.useState("multiple_choice"),[k,T]=o.useState(""),[j,O]=o.useState(""),[v,I]=o.useState(""),[w,J]=o.useState(""),[N,R]=o.useState(""),[M,L]=o.useState(""),[p,x]=o.useState("A"),[_,K]=o.useState(""),[C,U]=o.useState(""),[H,Q]=o.useState(1),[A,S]=o.useState(""),[E,D]=o.useState("idle"),[q,z]=o.useState(""),[V,h]=o.useState(!1),g=ce(r=>r.addToast),{t:a}=de(),[u,y]=o.useState("idle"),ee=()=>{$("multiple_choice"),T(""),O(""),I(""),J(""),R(""),L(""),x("A"),K(""),U(""),Q(1)},te=async()=>{if(!k.trim()){alert(a("create.validation.fillQuestion"));return}if(s==="multiple_choice"){if(!j.trim()||!v.trim()||!w.trim()||!N.trim()){alert(a("create.validation.fillOptions4"));return}}else if(s==="fill_in_blank"&&!_.trim()){alert(a("create.validation.fillBlankAnswer"));return}if(!C.trim()){alert(a("create.validation.fillSubject"));return}y("saving");try{const r={question:k.trim(),option_a:s==="multiple_choice"?j.trim():"",option_b:s==="multiple_choice"?v.trim():"",option_c:s==="multiple_choice"?w.trim():"",option_d:s==="multiple_choice"?N.trim():"",option_e:s==="multiple_choice"&&M.trim()||"",correct_answer:s==="multiple_choice"?p:"A",blank_answer:s==="fill_in_blank"?_.trim():void 0,subject:C.trim(),difficulty:H,question_type:s};await me(r),y("success"),g({type:"success",title:"Kart kaydedildi",message:"Yeni kart başarıyla oluşturuldu"}),ee(),setTimeout(()=>y("idle"),2e3)}catch(r){console.error("Kart kaydedilirken hata:",r),y("error"),g({type:"error",title:"Hata",message:"Kart kaydedilemedi"}),setTimeout(()=>y("idle"),3e3)}},re=async()=>{if(!A.trim()){D("error"),z(a("create.import.empty"));return}try{let r=JSON.parse(A),i;if(Array.isArray(r))i=r;else if(typeof r=="object"&&r.question)i=[r];else throw new Error("JSON formatı geçersiz. Soru dizisi veya tek soru objesi bekleniyor.");const n=i.map((t,d)=>{if(!t.question)throw new Error(`Soru ${d+1}: 'question' alanı eksik.`);let l=[];if(t.options&&Array.isArray(t.options))l=t.options;else if(t.choices&&Array.isArray(t.choices))l=t.choices;else if(t.answers&&Array.isArray(t.answers))l=t.answers;else if(t.secenekler&&Array.isArray(t.secenekler))l=t.secenekler;else{const b=t.A||t.option_a||t.a,f=t.B||t.option_b||t.b,G=t.C||t.option_c||t.c,X=t.D||t.option_d||t.d;if(b&&f&&G&&X){l=[b,f,G,X];const Y=t.E||t.option_e||t.e;Y&&l.push(Y)}else throw new Error(`Soru ${d+1}: Seçenekler bulunamadı. 'options', 'choices', 'answers' dizisi veya 'A', 'B', 'C', 'D' alanları gerekli.`)}if(l.length<4)throw new Error(`Soru ${d+1}: En az 4 seçenek gerekli, ${l.length} bulundu.`);const c=t.correct||t.correct_answer||t.answer||t.dogruCevap;let m;if(typeof c=="number")m=c;else if(typeof c=="string"){const b=parseInt(c);if(!isNaN(b))m=b;else{const f=c.toUpperCase();if(["A","B","C","D","E"].includes(f))m=f.charCodeAt(0)-"A".charCodeAt(0);else throw new Error(`Soru ${d+1}: Doğru cevap formatı geçersiz. '${c}' desteklenmiyor.`)}}else throw new Error(`Soru ${d+1}: Doğru cevap belirtilmemiş.`);if(m<0||m>=l.length)throw new Error(`Soru ${d+1}: Doğru cevap indeksi geçersiz. ${m} >= ${l.length}`);const ie=["A","B","C","D","E"][m];let B=1;return typeof t.difficulty=="number"?B=t.difficulty:typeof t.difficulty=="string"&&(B={easy:1,medium:2,hard:3,kolay:1,orta:2,zor:3}[t.difficulty.toLowerCase()]||2),{question:t.question,option_a:l[0]||"",option_b:l[1]||"",option_c:l[2]||"",option_d:l[3]||"",option_e:l[4]||"",correct_answer:ie,subject:t.category||t.subject||t.konu||"İçe Aktarılan",difficulty:B,question_type:"multiple_choice"}});await pe(n),D("success"),z(`${n.length} kart başarıyla içe aktarıldı.`),g({type:"success",title:"İçe aktarma",message:`${n.length} kart eklendi`}),S(""),h(!1),setTimeout(()=>{D("idle"),z("")},3e3)}catch(r){console.error("JSON import hatası:",r),D("error"),z(r instanceof Error?r.message:a("create.import.parseError")),g({type:"error",title:"İçe aktarma hatası",message:"Dosya işlenemedi"})}},ae=r=>{var t;const i=(t=r.target.files)==null?void 0:t[0];if(!i)return;const n=new FileReader;n.onload=d=>{var c;const l=(c=d.target)==null?void 0:c.result;S(l),h(!0),g({type:"info",title:"Dosya yüklendi",message:i.name})},n.readAsText(i)},se=r=>{var t;r.preventDefault();const i=(t=r.dataTransfer.files)==null?void 0:t[0];if(!i)return;const n=new FileReader;n.onload=d=>{var c;const l=(c=d.target)==null?void 0:c.result;S(l),h(!0),g({type:"info",title:"Dosya bırakıldı",message:i.name})},n.readAsText(i)},le=r=>{r.preventDefault()},oe=()=>{const r=[{question:"Türkiye'nin başkenti neresidir?",options:["İstanbul","Ankara","İzmir","Bursa"],correct:1,category:"Genel Kültür",difficulty:"easy"},{question:"Hangi gezegen Güneş'e en yakındır?",options:["Venüs","Mars","Merkür","Dünya"],correct:2,category:"Bilim",difficulty:"medium"}],i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),n=URL.createObjectURL(i),t=document.createElement("a");t.href=n,t.download="sample-questions.json",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)};return e.jsx("div",{className:"min-h-screen p-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-12 p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsxs("h1",{className:"text-5xl font-bold text-white mb-4",children:["✨ ",a("create.title")]}),e.jsx("p",{className:"text-xl text-white/90",children:a("create.subtitle")})]}),E!=="idle"&&e.jsxs("div",{className:`mb-6 flex items-center gap-2 rounded-lg p-4 ${E==="success"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300"}`,children:[E==="success"?e.jsx(Z,{size:20}):e.jsx(P,{size:20}),e.jsx("span",{children:q})]}),e.jsxs("div",{className:"mb-12 p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:a("create.quickActions")}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("button",{onClick:()=>h(!V),className:"flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"},children:[e.jsx(W,{size:24}),a("create.jsonImport")]}),e.jsxs("button",{onClick:()=>{var r;return(r=F.current)==null?void 0:r.click()},className:"flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(he,{size:24}),a("create.fromFile")]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},children:[e.jsx(xe,{size:24}),a("create.sampleDownload")]}),e.jsx("input",{ref:F,type:"file",accept:".json",onChange:ae,className:"hidden"})]}),e.jsx("div",{onDrop:se,onDragOver:le,className:"mt-6 border-2 border-dashed rounded-2xl p-6 text-white/90",style:{borderColor:"rgba(255,255,255,0.4)",background:"rgba(255,255,255,0.06)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold",children:a("create.dragDrop.title")}),e.jsx("p",{className:"text-sm opacity-80",children:a("create.dragDrop.sub")})]})})]}),V&&e.jsxs("div",{className:"mb-12 p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 flex items-center",children:a("create.importTitle")}),e.jsx("button",{onClick:()=>h(!1),className:"p-3 rounded-full transition-all duration-300 hover:scale-110 text-gray-600 hover:text-gray-800",style:{background:"rgba(239, 68, 68, 0.1)"},children:e.jsx(ge,{size:24})})]}),e.jsx("textarea",{value:A,onChange:r=>S(r.target.value),placeholder:a("create.pasteJson"),className:"mb-6 h-48 w-full rounded-2xl p-6 font-mono text-lg border-2 border-gray-300 focus:border-blue-500 focus:outline-none transition-all duration-300",style:{background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)"}}),e.jsxs("button",{onClick:re,disabled:!A.trim(),className:"flex items-center gap-3 px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"},children:[e.jsx(W,{size:24}),a("create.import")]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("p",{className:"font-semibold",children:"JSON Formatı:"}),e.jsx("code",{className:"mt-1 block rounded bg-gray-100 p-2 dark:bg-gray-700",children:'[{"question": "Soru?", "options": ["A", "B", "C", "D"], "correct": 0, "category": "Kategori"}]'})]})]}),e.jsxs("div",{className:"p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h2",{className:"mb-8 text-3xl font-bold text-gray-800",children:a("create.manualTitle")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-4 block text-lg font-bold text-gray-800",children:a("create.questionType")}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("button",{type:"button",onClick:()=>$("multiple_choice"),className:"flex-1 rounded-2xl p-6 transition-all duration-300 transform hover:scale-105",style:{background:s==="multiple_choice"?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"rgba(255, 255, 255, 0.8)",border:s==="multiple_choice"?"3px solid #1d4ed8":"2px solid rgba(148, 163, 184, 0.3)",backdropFilter:"blur(10px)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xl font-bold mb-2 ${s==="multiple_choice"?"text-white":"text-gray-800"}`,children:a("create.multipleChoice")}),e.jsx("div",{className:`text-sm ${s==="multiple_choice"?"text-white/90":"text-gray-600"}`,children:a("create.multipleChoice.desc")})]})}),e.jsx("button",{type:"button",onClick:()=>$("fill_in_blank"),className:"flex-1 rounded-2xl p-6 transition-all duration-300 transform hover:scale-105",style:{background:s==="fill_in_blank"?"linear-gradient(135deg, #10b981, #059669)":"rgba(255, 255, 255, 0.8)",border:s==="fill_in_blank"?"3px solid #059669":"2px solid rgba(148, 163, 184, 0.3)",backdropFilter:"blur(10px)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-xl font-bold mb-2 ${s==="fill_in_blank"?"text-white":"text-gray-800"}`,children:a("create.fillInBlank")}),e.jsx("div",{className:`text-sm ${s==="fill_in_blank"?"text-white/90":"text-gray-600"}`,children:a("create.fillInBlank.desc")})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("create.question")}),e.jsx("textarea",{value:k,onChange:r=>T(r.target.value),placeholder:s==="fill_in_blank"?"Sorunuzu yazın... (Boşluğu _____ ile belirtin)":"Sorunuzu yazın...",className:"h-24 w-full rounded-lg border border-gray-300 p-3 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}),s==="fill_in_blank"&&e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:[a("create.answerHint")," ",e.jsx("code",{className:"bg-gray-100 px-1 dark:bg-gray-700",children:"_____"})]})]}),s==="multiple_choice"&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("create.options")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:p==="A",onChange:()=>x("A"),className:"mt-1"}),e.jsx("span",{className:"mt-1 font-semibold text-gray-700 dark:text-gray-300",children:"A)"}),e.jsx("input",{type:"text",value:j,onChange:r=>O(r.target.value),placeholder:`${a("create.option")} A`,className:"flex-1 rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:p==="B",onChange:()=>x("B"),className:"mt-1"}),e.jsx("span",{className:"mt-1 font-semibold text-gray-700 dark:text-gray-300",children:"B)"}),e.jsx("input",{type:"text",value:v,onChange:r=>I(r.target.value),placeholder:`${a("create.option")} B`,className:"flex-1 rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:p==="C",onChange:()=>x("C"),className:"mt-1"}),e.jsx("span",{className:"mt-1 font-semibold text-gray-700 dark:text-gray-300",children:"C)"}),e.jsx("input",{type:"text",value:w,onChange:r=>J(r.target.value),placeholder:`${a("create.option")} C`,className:"flex-1 rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:p==="D",onChange:()=>x("D"),className:"mt-1"}),e.jsx("span",{className:"mt-1 font-semibold text-gray-700 dark:text-gray-300",children:"D)"}),e.jsx("input",{type:"text",value:N,onChange:r=>R(r.target.value),placeholder:`${a("create.option")} D`,className:"flex-1 rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"radio",name:"correctAnswer",checked:p==="E",onChange:()=>x("E"),className:"mt-1"}),e.jsx("span",{className:"mt-1 font-semibold text-gray-500 dark:text-gray-400",children:"E)"}),e.jsx("input",{type:"text",value:M,onChange:r=>L(r.target.value),placeholder:`${a("create.optionOptional")}`,className:"flex-1 rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]})]})]}),s==="fill_in_blank"&&e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("create.answer")}),e.jsx("input",{type:"text",value:_,onChange:r=>K(r.target.value),placeholder:a("create.answer"),className:"w-full rounded-lg border border-gray-300 p-3 dark:border-gray-600 dark:bg-gray-700 dark:text-white"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:'💡 İpucu: Birden fazla doğru cevap varsa virgülle ayırın (örn: "ankara,Ankara,ANKARA")'})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("create.subject")}),e.jsx("input",{type:"text",value:C,onChange:r=>U(r.target.value),placeholder:a("create.subject.placeholder"),className:"w-full rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300",children:a("create.difficulty")}),e.jsxs("select",{value:H,onChange:r=>Q(parseInt(r.target.value)),className:"w-full rounded-lg border border-gray-300 p-2 dark:border-gray-600 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:1,children:"Kolay (1)"}),e.jsx("option",{value:2,children:"Orta (2)"}),e.jsx("option",{value:3,children:"Zor (3)"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:te,disabled:u==="saving"||!k.trim()||!C.trim()||s==="multiple_choice"&&(!j.trim()||!v.trim()||!w.trim()||!N.trim())||s==="fill_in_blank"&&!_.trim(),className:`flex items-center gap-2 rounded-lg px-6 py-2 text-white transition-colors ${u==="saving"?"bg-gray-400":u==="success"?"bg-green-600":u==="error"?"bg-red-600":"bg-blue-600 hover:bg-blue-700"} disabled:opacity-50`,children:u==="saving"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),a("create.saving")]}):u==="success"?e.jsxs(e.Fragment,{children:[e.jsx(Z,{size:20}),a("create.saved")]}):u==="error"?e.jsxs(e.Fragment,{children:[e.jsx(P,{size:20}),a("create.error")]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{size:20}),a("create.save")]})})})]})]})]})})};export{_e as default};
