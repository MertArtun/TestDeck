import{d as O,f as R,r as n,e as Z,u as Q,j as e}from"./index-5afd821c.js";import{c as S,g as V,u as X,k as Y}from"./createLucideIcon-6899df1c.js";import{S as G}from"./Skeleton-67b72c6d.js";import{A as J}from"./arrow-left-92a3ed61.js";import{P as U}from"./plus-6b55a125.js";import{S as W}from"./search-748789b4.js";import{B as ee}from"./book-open-5dce8f6a.js";import{S as se}from"./save-89a13c28.js";import{X as te}from"./x-c8f8eefc.js";import{T as ae}from"./trash-2-b55e2a2d.js";import{C as re}from"./clock-e6037e52.js";const le=S("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),k=S("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),he=()=>{const f=O(),{subject:m}=R(),[j,L]=n.useState([]),[u,D]=n.useState([]),[T,y]=n.useState(!0),[a,$]=n.useState(""),[i,N]=n.useState(m||"all"),[x,p]=n.useState(null),[d,c]=n.useState({}),[q,E]=n.useState([]),w=Z(s=>s.addToast),{t:r,locale:v}=Q();n.useEffect(()=>{b()},[]),n.useEffect(()=>{K()},[j,a,i]);const b=async()=>{try{y(!0);const s=await V();L(s);const t=[...new Set(s.map(g=>g.subject))];E(t),m&&m!=="all"&&N(m)}catch(s){console.error("Kartlar yüklenirken hata:",s)}finally{y(!1)}},K=()=>{let s=j;i!=="all"&&(s=s.filter(t=>t.subject===i)),a&&(s=s.filter(t=>t.question.toLowerCase().includes(a.toLowerCase())||t.subject.toLowerCase().includes(a.toLowerCase())||t.option_a&&t.option_a.toLowerCase().includes(a.toLowerCase())||t.option_b&&t.option_b.toLowerCase().includes(a.toLowerCase())||t.option_c&&t.option_c.toLowerCase().includes(a.toLowerCase())||t.option_d&&t.option_d.toLowerCase().includes(a.toLowerCase())||t.blank_answer&&t.blank_answer.toLowerCase().includes(a.toLowerCase()))),D(s)},A=s=>{p(s.id),c(s)},B=async()=>{if(x)try{await X(x,d),await b(),p(null),c({})}catch(s){console.error("Kart güncelleme hatası:",s),alert("Kart güncellenirken bir hata oluştu.")}},F=()=>{p(null),c({})},I=async s=>{if(confirm("Bu kartı silmek istediğinizden emin misiniz?"))try{await Y(s),await b(),w({type:"success",title:"Silindi",message:`Kart ${s} silindi`})}catch(t){console.error("Kart silme hatası:",t),w({type:"error",title:"Hata",message:"Kart silinirken bir hata oluştu."})}},P=s=>{switch(s){case 1:return{label:"Kolay",color:"bg-green-100 text-green-800"};case 2:return{label:"Orta",color:"bg-yellow-100 text-yellow-800"};case 3:return{label:"Zor",color:"bg-red-100 text-red-800"};default:return{label:"Bilinmiyor",color:"bg-gray-100 text-gray-800"}}},M=s=>{switch(s){case"fill_in_blank":return{label:"Boşluk Doldurma",color:"bg-purple-100 text-purple-800",icon:"✏️"};default:return{label:"Çoktan Seçmeli",color:"bg-blue-100 text-blue-800",icon:"📝"}}};return T?e.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((s,t)=>e.jsx(G,{},t))}):e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>f("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(J,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r("manager.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:i==="all"?`${r("manager.subtitle.all")} - ${u.length} ${r("common.cards")}`:`${i} - ${u.length} ${r("common.cards")}`})]})]}),e.jsxs("button",{onClick:()=>f("/create"),className:"btn-primary flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),r("manager.newCard")]})]})}),e.jsx("div",{className:"card mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:r("manager.search"),value:a,onChange:s=>$(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{value:i,onChange:s=>N(s.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent min-w-[200px]",children:[e.jsx("option",{value:"all",children:r("manager.allSubjects")}),q.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ee,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:r("manager.notFoundTitle")}),e.jsx("p",{className:"text-gray-600",children:r(a||i!=="all"?"manager.noResults":"manager.noCardsYet")})]}):u.map(s=>{const t=x===s.id,g=P(s.difficulty),h=M(s.question_type);return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.color}`,children:[h.icon," ",h.label]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.color}`,children:g.label}),e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-800 rounded-full text-xs font-medium",children:s.subject})]}),e.jsx("div",{className:"flex items-center gap-2",children:t?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:B,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:F,className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",children:e.jsx(te,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>A(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(ae,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soru"}),t?e.jsx("textarea",{value:d.question||"",onChange:l=>c(o=>({...o,question:l.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3}):e.jsx("div",{className:"text-gray-900 font-medium",dangerouslySetInnerHTML:{__html:s.question_type==="fill_in_blank"?s.question.replace(/_____/g,'<span class="bg-yellow-200 px-2 py-1 rounded">_____</span>'):s.question}})]}),s.question_type==="fill_in_blank"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doğru Cevap"}),t?e.jsx("input",{type:"text",value:d.blank_answer||"",onChange:l=>c(o=>({...o,blank_answer:l.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}):e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsx("span",{className:"text-green-800 font-medium",children:s.blank_answer})})]}),s.hints&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İpuçları"}),t?e.jsx("textarea",{value:d.hints||"",onChange:l=>c(o=>({...o,hints:l.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:2}):e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("span",{className:"text-blue-800",children:s.hints})})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["A","B","C","D","E"].map(l=>{const o=`option_${l.toLowerCase()}`,C=s[o],_=s.correct_answer===l;return!C&&!t?null:e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Seçenek ",l,_&&e.jsx("span",{className:"ml-2 text-green-600 text-xs",children:r("manager.correctAnswer")})]}),t?e.jsx("input",{type:"text",value:d[o]||"",onChange:z=>c(H=>({...H,[o]:z.target.value})),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}):e.jsx("div",{className:`p-3 rounded-lg border ${_?"bg-green-50 border-green-200 text-green-800":"bg-gray-50 border-gray-200 text-gray-800"}`,children:C})]},l)})}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"}),new Date(s.created_at).toLocaleDateString(v)]}),s.updated_at!==s.created_at&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),new Date(s.updated_at).toLocaleDateString(v)]})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["ID: ",s.id]})]})})]},s.id)})})]})};export{he as default};
