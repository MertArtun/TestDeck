import{_ as u}from"./index-5afd821c.js";import{p as o}from"./createLucideIcon-6899df1c.js";async function d(r){try{console.log("ğŸƒ Yeni kart oluÅŸturuluyor:",r);const t=await o("create_card",{card:r});return console.log("âœ… Kart baÅŸarÄ±yla oluÅŸturuldu, ID:",t),t}catch(t){throw console.error("âŒ Kart oluÅŸturma hatasÄ±:",t),new Error(`Kart oluÅŸturulamadÄ±: ${t}`)}}async function w(r){try{console.log(`ğŸƒ ${r.length} adet kart toplu olarak oluÅŸturuluyor...`);const t=[];for(const e of r){const a=await d(e);t.push(a)}return console.log(`âœ… ${t.length} kart baÅŸarÄ±yla oluÅŸturuldu`),t}catch(t){throw console.error("âŒ Toplu kart oluÅŸturma hatasÄ±:",t),new Error(`Kartlar oluÅŸturulamadÄ±: ${t}`)}}async function c(){try{console.log("ğŸ“š TÃ¼m kartlar yÃ¼kleniyor...");const r=await o("get_all_cards");return console.log(`âœ… ${r.length} kart baÅŸarÄ±yla yÃ¼klendi`),r}catch(r){throw console.error("âŒ KartlarÄ± yÃ¼kleme hatasÄ±:",r),new Error(`Kartlar yÃ¼klenemedi: ${r}`)}}async function h(r){try{console.log(`ğŸ“– ${r} konusundaki kartlar yÃ¼kleniyor...`);const t=await o("get_cards_by_subject",{subject:r});return console.log(`âœ… ${r} konusunda ${t.length} kart bulundu`),t}catch(t){throw console.error("âŒ Konu kartlarÄ±nÄ± yÃ¼kleme hatasÄ±:",t),new Error(`${r} kartlarÄ± yÃ¼klenemedi: ${t}`)}}async function _(r,t){try{console.log(`ğŸ”„ Kart gÃ¼ncelleniyor, ID: ${r}`,t);const a=(await c()).find(n=>n.id===r);if(!a)throw new Error(`Kart bulunamadÄ±: ${r}`);const l={...a,...t};await o("update_card",{id:r,card:l}),console.log(`âœ… Kart baÅŸarÄ±yla gÃ¼ncellendi, ID: ${r}`)}catch(e){throw console.error("âŒ Kart gÃ¼ncelleme hatasÄ±:",e),new Error(`Kart gÃ¼ncellenemedi: ${e}`)}}async function p(r){try{console.log(`ğŸ—‘ï¸ Kart siliniyor, ID: ${r}`),await o("delete_card",{id:r}),console.log(`âœ… Kart baÅŸarÄ±yla silindi, ID: ${r}`)}catch(t){throw console.error("âŒ Kart silme hatasÄ±:",t),new Error(`Kart silinemedi: ${t}`)}}async function b(){try{console.log("ğŸ—‘ï¸ TÃ¼m kartlar ve ilgili veriler siliniyor..."),await o("delete_all_cards"),console.log("âœ… TÃ¼m kartlar baÅŸarÄ±yla silindi")}catch(r){throw console.error("âŒ Toplu kart silme hatasÄ±:",r),new Error(`Kartlar silinemedi: ${r}`)}}async function $(r){try{console.log("ğŸ¯ Yeni oturum oluÅŸturuluyor:",r);const t=await o("create_session",{session:r});return console.log("âœ… Oturum baÅŸarÄ±yla oluÅŸturuldu, ID:",t),t}catch(t){throw console.error("âŒ Oturum oluÅŸturma hatasÄ±:",t),new Error(`Oturum oluÅŸturulamadÄ±: ${t}`)}}async function f(r,t){try{console.log(`ğŸ Oturum sonlandÄ±rÄ±lÄ±yor, ID: ${r}, DoÄŸru: ${t}`),await o("end_session",{sessionId:r,correctAnswers:t}),console.log(`âœ… Oturum baÅŸarÄ±yla sonlandÄ±rÄ±ldÄ±, ID: ${r}`)}catch(e){throw console.error("âŒ Oturum sonlandÄ±rma hatasÄ±:",e),new Error(`Oturum sonlandÄ±rÄ±lamadÄ±: ${e}`)}}async function D(r){try{const t={...r,attempted_at:new Date().toISOString(),time_taken:r.time_spent??r.time_taken??0};console.log("ğŸ“ Deneme kaydediliyor:",t);const e=await o("record_attempt",{attempt:t});return console.log("âœ… Deneme baÅŸarÄ±yla kaydedildi, ID:",e),e}catch(t){throw console.error("âŒ Deneme kaydetme hatasÄ±:",t),new Error(`Deneme kaydedilemedi: ${t}`)}}async function y(){try{console.log("ğŸ“Š Konu istatistikleri yÃ¼kleniyor...");const r=await o("get_subject_stats");return console.log(`âœ… ${r.length} konu istatistiÄŸi yÃ¼klendi`),r}catch(r){throw console.error("âŒ Konu istatistikleri yÃ¼kleme hatasÄ±:",r),new Error(`Konu istatistikleri yÃ¼klenemedi: ${r}`)}}async function g(r=30){try{console.log(`ğŸ“ˆ Son ${r} gÃ¼nÃ¼n istatistikleri yÃ¼kleniyor...`);const t=await o("get_daily_stats",{days:r});return console.log(`âœ… ${t.length} gÃ¼nlÃ¼k istatistik yÃ¼klendi`),t.map(a=>({date:a.date,questions_answered:a.questions_answered??a.total_questions??0,correct_answers:a.correct_answers??0,accuracy:a.accuracy??0,study_time:a.study_time??0}))}catch(t){throw console.error("âŒ GÃ¼nlÃ¼k istatistikler yÃ¼kleme hatasÄ±:",t),new Error(`GÃ¼nlÃ¼k istatistikler yÃ¼klenemedi: ${t}`)}}async function S(r,t){try{console.log(`ğŸ“Š Kart istatistiÄŸi gÃ¼ncellendi: ${r}, DoÄŸru: ${t}`)}catch(e){console.error("âŒ Kart istatistiÄŸi gÃ¼ncelleme hatasÄ±:",e)}}async function K(){try{console.log("ğŸ—„ï¸ VeritabanÄ± baÅŸlatÄ±lÄ±yor..."),await c(),console.log("âœ… VeritabanÄ± baÅŸarÄ±yla baÅŸlatÄ±ldÄ±")}catch(r){throw console.error("âŒ VeritabanÄ± baÅŸlatma hatasÄ±:",r),new Error(`VeritabanÄ± baÅŸlatÄ±lamadÄ±: ${r}`)}}function E(){return{type:"sqlite",status:"connected",location:"app_data/testdeck.db"}}async function I(){try{console.log("ğŸ“¤ Veriler dÄ±ÅŸa aktarÄ±lÄ±yor...");const r=await c(),t=await y(),e=await g(365),a={cards:r,subjectStats:t,dailyStats:e,exportedAt:new Date().toISOString(),version:"2.0-sqlite"},{save:l}=await u(()=>import("./createLucideIcon-6899df1c.js").then(i=>i.q),["assets/createLucideIcon-6899df1c.js","assets/index-5afd821c.js","assets/index-dc4438df.css"]),{writeTextFile:n}=await u(()=>import("./createLucideIcon-6899df1c.js").then(i=>i.t),["assets/createLucideIcon-6899df1c.js","assets/index-5afd821c.js","assets/index-dc4438df.css"]),s=await l({filters:[{name:"TestDeck Backup",extensions:["json"]}],defaultPath:`testdeck-backup-${new Date().toISOString().split("T")[0]}.json`});s&&(await n(s,JSON.stringify(a,null,2)),console.log("âœ… Veriler baÅŸarÄ±yla dÄ±ÅŸa aktarÄ±ldÄ±:",s))}catch(r){throw console.error("âŒ Veri dÄ±ÅŸa aktarma hatasÄ±:",r),new Error(`Veriler dÄ±ÅŸa aktarÄ±lamadÄ±: ${r}`)}}async function C(){try{console.log("ğŸ”„ localStorage verilerinden SQLite'e geÃ§iÅŸ yapÄ±lÄ±yor...");const r=localStorage.getItem("testdeck-data");if(!r){console.log("â„¹ï¸ GeÃ§irilecek localStorage verisi bulunamadÄ±");return}const t=JSON.parse(r);if(!t.cards||!Array.isArray(t.cards)){console.log("â„¹ï¸ GeÃ§erli kart verisi bulunamadÄ±");return}console.log(`ğŸ“¦ ${t.cards.length} kart geÃ§iriliyor...`);let e=0;for(const a of t.cards)try{const l={question:a.question||"",option_a:a.option_a||null,option_b:a.option_b||null,option_c:a.option_c||null,option_d:a.option_d||null,option_e:a.option_e||null,correct_answer:a.correct_answer||null,blank_answer:a.blank_answer||null,question_type:a.question_type||"multiple_choice",subject:a.subject||"Genel",difficulty:a.difficulty||1,image_path:a.image_path||null};await d(l),e++}catch(l){console.warn("âš ï¸ Kart geÃ§irilemedi:",a,l)}console.log(`âœ… ${e} kart baÅŸarÄ±yla SQLite'e geÃ§irildi`),localStorage.setItem("testdeck-data-backup",r),localStorage.removeItem("testdeck-data"),console.log("ğŸ§¹ localStorage temizlendi, yedek oluÅŸturuldu")}catch(r){throw console.error("âŒ Veri geÃ§iÅŸ hatasÄ±:",r),new Error(`Veriler geÃ§irilemedi: ${r}`)}}export{d as createCard,w as createMultipleCards,$ as createSession,b as deleteAllCards,p as deleteCard,f as endSession,I as exportUserData,c as getAllCards,h as getCardsBySubject,g as getDailyStats,E as getDatabase,y as getSubjectStats,K as initDatabase,C as migrateFromLocalStorage,D as recordAttempt,_ as updateCard,S as updateCardStats};
