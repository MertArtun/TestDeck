import{d as oe,r as m,u as ce,j as e}from"./index-5afd821c.js";import{u as xe,B as H}from"./bar-chart-3-79f0edcb.js";import{c as ue,g as me,s as J,e as be,f as ge,r as he,h as pe,u as fe}from"./createLucideIcon-6899df1c.js";import{A as X}from"./arrow-left-92a3ed61.js";import{A as E}from"./alert-circle-c446cba2.js";import{R as V}from"./rotate-ccw-8baff0ab.js";import{C as ye}from"./clock-e6037e52.js";import{P as we}from"./play-d4f686f2.js";import{C as k}from"./check-circle-1e39d727.js";const $=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Me=()=>{const A=oe(),{cards:x,setCards:W,currentSession:v,sessionCards:f,currentQuestionIndex:y,userAnswers:C,startSession:R,answerQuestion:T,nextQuestion:I,endSession:S,setLoading:w,updateCard:Y}=xe(),[L,_]=m.useState("setup"),[d,q]=m.useState("all"),[u,Q]=m.useState("practice"),[b,O]=m.useState(10),[Z,B]=m.useState(new Date),[je,M]=m.useState(new Date),[z,G]=m.useState([]),[h,K]=m.useState([]),[p,ee]=m.useState([]),{t:r,locale:Ne}=ce();m.useEffect(()=>{te()},[]),m.useEffect(()=>{const t=[...new Set(x.map(s=>s.subject))];G(t)},[x]),m.useEffect(()=>{K(f)},[f]);const te=async()=>{try{w(!0);const t=await me();console.log("🃏 Kartlar yüklendi:",t);const s=t.filter(a=>a.image_path&&a.image_path.trim());console.log(`🖼️ ${s.length} adet görselli kart bulundu.`,s),W(t)}catch(t){console.error("Kartları yüklerken hata:",t)}finally{w(!1)}},se=async()=>{try{w(!0);let t=x;if(d!=="all"&&(t=await be(d)),p.length>0&&(t=t.filter(l=>p.includes(l.difficulty))),t.length===0){alert(r("study.noCardsMatchAlert")),w(!1);return}const s=[...t];for(let l=s.length-1;l>0;l--){const n=Math.floor(Math.random()*(l+1));[s[l],s[n]]=[s[n],s[l]]}let a=[...s];if(b>s.length){console.log(`📚 TEKRAR MODU: İstenen ${b} soru > Mevcut ${s.length} kart`);const l=b-s.length;for(let n=0;n<l;n++){const o=Math.floor(Math.random()*s.length),c={...s[o]};c.id=c.id+(n+1)*1e4,a.push(c)}console.log(`✅ SONUÇ: ${s.length} farklı kart + ${l} rastgele tekrar = ${a.length} toplam`)}else b===s.length?(a=s,console.log(`🎯 MÜKEMMEL EŞLEME: ${b} soru = ${s.length} kart (hiç tekrar yok)`)):(a=s.slice(0,b),console.log(`📝 NORMAL MOD: ${b} farklı soru seçildi (${s.length} karttan)`));console.log("🔀 Final kartlar:",{totalCards:a.length,uniqueCards:s.length,requestedCount:b}),R(a,u),B(new Date),M(new Date),_("studying")}catch(t){console.error("Çalışma başlatma hatası:",t),alert(r("study.startError"))}finally{w(!1)}},re=t=>{if(!f[y])return;const s=f[y];T(s.id,t),setTimeout(()=>{y<f.length-1?(I(),M(new Date)):U()},2500)},U=async()=>{try{if(!v)return;w(!0);const t=await ge({started_at:Z.toISOString(),total_questions:f.length,session_type:u});if(!t)return;let s=0;for(const a of f){const l=C[a.id];let n=!1;if(a.question_type==="fill_in_blank"&&a.blank_answer){const o=a.blank_answer.toLowerCase().split(",").map(N=>N.trim()),c=(l||"").toString().toLowerCase().trim();n=o.includes(c),console.log("🔍 Boşluk doldurma cevap kontrolü:",{cardId:a.id,userAnswer:c,correctAnswers:o,isCorrect:n})}else n=l===a.correct_answer,console.log("🔍 Çoktan seçmeli cevap kontrolü:",{cardId:a.id,userAnswer:l,correctAnswer:a.correct_answer,isCorrect:n});n&&s++;try{await he({card_id:a.id,session_id:t,user_answer:l,is_correct:n,time_spent:30})}catch(o){console.error("❌ Attempt kaydetme hatası:",o,{cardId:a.id})}}await pe(t,s),_("results")}catch(t){console.error("Session sonlandırma hatası:",t)}finally{w(!1)}},ae=async(t,s)=>{try{K(l=>l.map(n=>n.id===t?{...n,difficulty:s}:n));const a=x.find(l=>l.id===t);a&&Y({...a,difficulty:s}),await fe(t,{difficulty:s}),console.log(`✅ Kart ID ${t} zorluğu ${s} olarak güncellendi.`)}catch(a){console.error("Zorluk güncellenirken hata:",a)}},le=()=>{const t=h.filter(s=>{const a=C[s.id];if(a===void 0)return!1;if(s.question_type==="fill_in_blank"&&s.blank_answer){const l=s.blank_answer.toLowerCase().split(",").map(o=>o.trim()),n=(a||"").toString().toLowerCase().trim();return!l.includes(n)}else return a!==s.correct_answer});t.length>0&&(console.log(`🔄 Yanlış bilinen ${t.length} kart ile yeni oturum başlatılıyor...`),S(),R(t,"practice"),B(new Date),M(new Date),_("studying"))},ne=()=>{S(),_("setup"),O(10),q("all")},i=h[y],P=J(y+1,h.length),j=i?C[i.id]:null,g=j!==void 0,ie=()=>{i&&(T(i.id,""),setTimeout(()=>{y<f.length-1?I():U()},100))};if(L==="setup")return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem"},children:[e.jsxs("div",{className:"mb-8 flex items-center",children:[e.jsx("button",{onClick:()=>{S(),A(-1)},className:"mr-4 p-3 hover:bg-white/20 rounded-xl transition-all duration-200",style:{color:"white"},children:e.jsx(X,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:r("study.header")}),e.jsx("p",{className:"text-white/80 text-lg",children:r("study.header.subtitle")})]})]}),e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"2rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsxs("h3",{className:"text-2xl font-bold text-white mb-6 flex items-center",children:["📚 ",r("study.selectSubject")]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>q("all"),className:"p-6 rounded-2xl transition-all duration-300 transform hover:scale-105",style:{background:d==="all"?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",border:d==="all"?"3px solid #3b82f6":"2px solid rgba(255, 255, 255, 0.3)",boxShadow:d==="all"?"0 20px 40px rgba(59, 130, 246, 0.3)":"0 10px 25px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:"🎯"}),e.jsx("div",{className:`text-lg font-bold mb-2 ${d==="all"?"text-gray-800":"text-white"}`,children:r("study.mixedStudy")}),e.jsxs("div",{className:`text-sm ${d==="all"?"text-gray-600":"text-white/80"}`,children:[r("study.allSubjects")," • ",x.length," ",r("common.cards")]}),d==="all"&&e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold bg-blue-500 text-white",children:["✨ ",r("common.selected")]})})]})}),z.map((t,s)=>{const a=["📐","🧪","📖","🌍","🎨","💼","⚖️","🔬","💻","🏛️"],l=a[s%a.length],n=x.filter(o=>o.subject===t);return e.jsx("button",{onClick:()=>q(t),className:"p-6 rounded-2xl transition-all duration-300 transform hover:scale-105",style:{background:d===t?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",border:d===t?"3px solid #10b981":"2px solid rgba(255, 255, 255, 0.3)",boxShadow:d===t?"0 20px 40px rgba(16, 185, 129, 0.3)":"0 10px 25px rgba(0, 0, 0, 0.1)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl mb-3",children:l}),e.jsx("div",{className:`text-lg font-bold mb-2 ${d===t?"text-gray-800":"text-white"}`,children:t}),e.jsxs("div",{className:`text-sm ${d===t?"text-gray-600":"text-white/80"}`,children:[n.length," ",r("common.cards")]}),d===t&&e.jsx("div",{className:"mt-3",children:e.jsxs("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-bold bg-green-500 text-white",children:["✨ ",r("common.selected")]})})]})},t)})]}),z.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-5xl mb-4",children:"📖"}),e.jsx("p",{className:"text-white/80 text-lg mb-4",children:r("study.noSubjects")}),e.jsxs("button",{onClick:()=>A("/create"),className:"px-6 py-3 rounded-2xl font-bold text-gray-800 transition-all duration-300 transform hover:scale-105",style:{background:"rgba(255, 255, 255, 0.9)"},children:["🎯 ",r("study.createFirstCard")]})]})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"2rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:r("study.difficulty")}),e.jsx("div",{className:"flex gap-4",children:[{label:r("study.all"),value:[],color:"from-blue-500 to-blue-600"},{label:r("study.easy"),value:[1],color:"from-green-500 to-green-600"},{label:r("study.medium"),value:[2],color:"from-yellow-500 to-orange-500"},{label:r("study.hard"),value:[3],color:"from-red-500 to-red-600"}].map(({label:t,value:s,color:a})=>{const l=JSON.stringify(p.sort())===JSON.stringify(s.sort());return e.jsx("button",{type:"button",onClick:()=>ee(s),className:`flex-1 py-4 px-6 rounded-2xl font-semibold text-white transition-all duration-200 transform hover:scale-105 ${l?"ring-4 ring-white/50":""}`,style:{background:l?"linear-gradient(135deg, var(--tw-gradient-stops))":"rgba(255, 255, 255, 0.2)",backgroundImage:l?`linear-gradient(135deg, ${a.includes("blue")?"#3b82f6, #2563eb":a.includes("green")?"#10b981, #059669":a.includes("yellow")?"#f59e0b, #ea580c":"#ef4444, #dc2626"})`:void 0},children:t},t)})})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"2rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:r("study.questionCount")}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("input",{type:"range",min:"5",max:(()=>{let t=x;return d!=="all"&&(t=t.filter(s=>s.subject===d)),p.length>0&&(t=t.filter(s=>p.includes(s.difficulty))),t.length>0?Math.max(50,t.length):50})(),value:b,onChange:t=>O(parseInt(t.target.value)),className:"flex-1 h-3 bg-white/30 rounded-full appearance-none cursor-pointer",style:{background:"rgba(255, 255, 255, 0.3)",height:"12px",borderRadius:"6px"}}),e.jsx("div",{className:"text-3xl font-bold text-white px-6 py-3 rounded-2xl min-w-[80px] text-center",style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:b})]}),(()=>{let t=x;return d!=="all"&&(t=t.filter(a=>a.subject===d)),p.length>0&&(t=t.filter(a=>p.includes(a.difficulty))),t.length===0?e.jsxs("div",{className:"mt-4 p-4 rounded-2xl text-white font-medium flex items-center gap-3",style:{background:"rgba(239, 68, 68, 0.3)",border:"1px solid rgba(239, 68, 68, 0.5)"},children:[e.jsx(E,{className:"w-5 h-5"}),r("study.noCardsMatch")]}):null})()]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",borderRadius:"24px",padding:"2rem",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:r("study.type")}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("button",{type:"button",onClick:()=>Q("practice"),className:`p-8 rounded-3xl transition-all duration-200 transform hover:scale-105 ${u==="practice"?"ring-4 ring-white/50":""}`,style:{background:u==="practice"?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{background:u==="practice"?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"rgba(255, 255, 255, 0.3)"},children:e.jsx(V,{className:`w-8 h-8 ${u==="practice"?"text-white":"text-white/80"}`})}),e.jsx("div",{className:`text-xl font-bold mb-2 ${u==="practice"?"text-gray-800":"text-white"}`,children:r("study.practice")}),e.jsx("div",{className:`text-sm ${u==="practice"?"text-gray-600":"text-white/80"}`,children:r("study.practice.desc")})]})}),e.jsx("button",{type:"button",onClick:()=>Q("test"),className:`p-8 rounded-3xl transition-all duration-200 transform hover:scale-105 ${u==="test"?"ring-4 ring-white/50":""}`,style:{background:u==="test"?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{background:u==="test"?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"rgba(255, 255, 255, 0.3)"},children:e.jsx(ye,{className:`w-8 h-8 ${u==="test"?"text-white":"text-white/80"}`})}),e.jsx("div",{className:`text-xl font-bold mb-2 ${u==="test"?"text-gray-800":"text-white"}`,children:r("study.test")}),e.jsx("div",{className:`text-sm ${u==="test"?"text-gray-600":"text-white/80"}`,children:r("study.test.desc")})]})})]})]}),e.jsx("div",{className:"flex justify-center pt-8",children:e.jsx("button",{onClick:se,disabled:x.length===0,className:"px-16 py-6 rounded-3xl font-black text-2xl text-white transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-4 shadow-2xl",style:{background:x.length>0?"linear-gradient(135deg, #667eea, #764ba2)":"rgba(255, 255, 255, 0.3)",border:"3px solid rgba(255, 255, 255, 0.3)",boxShadow:x.length>0?"0 25px 50px rgba(103, 126, 234, 0.4)":"none"},children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-8 h-8"}),"🚀 ",r("study.start")]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-8 h-8"}),"⚠️ ",r("study.noCards")]})})}),x.length>0&&e.jsxs("div",{className:"text-center mt-6 text-white/80 text-lg",children:[e.jsx("span",{className:"font-bold",children:(()=>{let t=x;return d!=="all"&&(t=t.filter(s=>s.subject===d)),p.length>0&&(t=t.filter(s=>p.includes(s.difficulty))),Math.min(b,t.length)})()})," kart ile çalışmaya hazırsın! 🎯"]}),x.length===0&&e.jsx("div",{className:"text-center p-6 rounded-2xl",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsx("p",{className:"text-white/90 text-lg",children:"Çalışmaya başlamak için önce kart oluşturmalısınız."})})]})]});if(L==="studying"&&i)return e.jsxs("div",{className:"min-h-screen p-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>{S(),_("setup")},className:"flex items-center gap-2 px-4 py-2 text-white/90 hover:text-white transition-colors",children:[e.jsx(X,{className:"w-5 h-5"}),e.jsx("span",{children:r("study.exit")})]}),e.jsx("div",{className:"text-white/90 text-sm font-medium",children:r(u==="practice"?"study.practiceMode":"study.testMode")})]}),e.jsxs("div",{className:"p-6 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-white/90 font-medium",children:[r("study.question")," ",y+1," / ",h.length]}),e.jsxs("span",{className:"text-white/90 font-medium",children:["%",Math.round(P)," ",r("study.completed")]})]}),e.jsx("div",{className:"w-full rounded-full h-3",style:{background:"rgba(255, 255, 255, 0.2)"},children:e.jsx("div",{className:"h-3 rounded-full transition-all duration-500 ease-out",style:{width:`${P}%`,background:"linear-gradient(90deg, #10b981, #059669)"}})})]})]}),e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"px-4 py-2 rounded-2xl text-sm font-semibold",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white"},children:["📚 ",i.subject]}),e.jsx("span",{className:"px-4 py-2 rounded-2xl text-sm font-semibold",style:{background:i.difficulty===1?"linear-gradient(135deg, #10b981, #059669)":i.difficulty===2?"linear-gradient(135deg, #f59e0b, #d97706)":"linear-gradient(135deg, #ef4444, #dc2626)",color:"white"},children:i.difficulty===1?`🟢 ${r("study.easy")}`:i.difficulty===2?`🟡 ${r("study.medium")}`:`🔴 ${r("study.hard")}`})]}),e.jsx("div",{className:"px-4 py-2 rounded-2xl text-sm font-medium",style:{background:"rgba(103, 126, 234, 0.1)",color:"#667eea"},children:i.question_type==="fill_in_blank"?r("study.fillInBlank"):r("study.multipleChoice")})]}),i.image_path&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"p-4 rounded-2xl",style:{background:"linear-gradient(135deg, #f8fafc, #e2e8f0)",border:"1px solid rgba(148, 163, 184, 0.2)"},children:e.jsx("img",{src:i.image_path,alt:"question image",className:"max-w-full h-64 object-contain mx-auto rounded-xl"})})}),e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"p-8 rounded-2xl",style:{background:"linear-gradient(135deg, #f8fafc, #f1f5f9)",border:"1px solid rgba(148, 163, 184, 0.2)"},children:i.question_type==="fill_in_blank"?e.jsx("h2",{className:"text-2xl font-bold text-gray-800 leading-relaxed text-center",dangerouslySetInnerHTML:{__html:i.question.replace(/_____/g,g&&j?`<span style="background: ${j===i.blank_answer?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)"}; color: white; padding: 8px 16px; border-radius: 12px; font-weight: bold; display: inline-block; margin: 0 8px;">${j}</span>`:'<span style="border-bottom: 3px solid #667eea; display: inline-block; min-width: 120px; height: 35px; margin: 0 8px; background: rgba(103, 126, 234, 0.1); border-radius: 8px;"></span>')}}):e.jsx("h2",{className:"text-2xl font-bold text-gray-800 leading-relaxed text-center",children:i.question})})}),e.jsx("div",{className:"space-y-4",children:["A","B","C","D","E"].map(t=>{const s=i[`option_${t.toLowerCase()}`];if(!s||typeof s=="string"&&!s.trim())return null;const a=j===t,l=i.correct_answer===t;let n={},o="w-full text-left p-6 rounded-2xl border-2 transition-all duration-300 transform hover:scale-[1.02]";return g?a&&l?n={background:"linear-gradient(135deg, #10b981, #059669)",border:"2px solid #059669",color:"white"}:a&&!l?n={background:"linear-gradient(135deg, #ef4444, #dc2626)",border:"2px solid #dc2626",color:"white"}:l?n={background:"linear-gradient(135deg, #10b981, #059669)",border:"2px solid #059669",color:"white"}:n={background:"rgba(148, 163, 184, 0.2)",border:"2px solid rgba(148, 163, 184, 0.3)",color:"#64748b"}:(n={background:"rgba(255, 255, 255, 0.8)",border:"2px solid rgba(148, 163, 184, 0.3)",backdropFilter:"blur(10px)"},o+=" hover:shadow-lg"),e.jsx("button",{onClick:()=>!g&&re(t),disabled:g,className:o,style:n,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center font-bold text-lg mr-6",style:{background:!g||a&&l||!a&&l||a&&!l?"rgba(255, 255, 255, 0.3)":"rgba(148, 163, 184, 0.3)",color:g?"inherit":"#667eea"},children:t}),e.jsx("span",{className:"flex-1 text-lg font-medium leading-relaxed",children:s}),g&&a&&e.jsx("div",{className:"ml-4",children:l?e.jsx(k,{className:"w-8 h-8 text-white"}):e.jsx($,{className:"w-8 h-8 text-white"})}),g&&!a&&l&&e.jsx("div",{className:"ml-4",children:e.jsx(k,{className:"w-8 h-8 text-white"})})]})},t)})}),g&&e.jsx("div",{className:"mt-8 p-6 rounded-2xl",style:{background:"linear-gradient(135deg, #f8fafc, #e2e8f0)",border:"1px solid rgba(148, 163, 184, 0.2)"},children:e.jsx("div",{className:"flex items-center justify-center",children:(()=>{let t=!1,s="";if(i.question_type==="fill_in_blank"&&i.blank_answer){const a=i.blank_answer.toLowerCase().split(",").map(n=>n.trim()),l=(j||"").toString().toLowerCase().trim();t=a.includes(l),s=i.blank_answer}else t=j===i.correct_answer,s=i.correct_answer;return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-3",children:[t?e.jsx(k,{className:"w-8 h-8 text-green-600 mr-3"}):e.jsx($,{className:"w-8 h-8 text-red-600 mr-3"}),e.jsx("span",{className:"text-xl font-bold text-gray-800",children:r(t?"study.correct":"study.wrong")})]}),!t&&e.jsxs("p",{className:"text-gray-600 text-lg",children:[r("study.correctAnswer")," ",e.jsx("span",{className:"font-semibold text-green-600",children:s})]})]})})()})}),g&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-6",children:r("study.howWasQuestion")}),e.jsx("div",{className:"flex justify-center items-center gap-4",children:[{label:`🟢 ${r("study.easy")}`,value:1,color:"linear-gradient(135deg, #10b981, #059669)"},{label:`🟡 ${r("study.medium")}`,value:2,color:"linear-gradient(135deg, #f59e0b, #d97706)"},{label:`🔴 ${r("study.hard")}`,value:3,color:"linear-gradient(135deg, #ef4444, #dc2626)"}].map(({label:t,value:s,color:a})=>e.jsx("button",{onClick:()=>ae(i.id,s),className:`px-6 py-3 rounded-2xl text-sm font-bold transition-all duration-300 transform hover:scale-105 ${i.difficulty===s?"shadow-lg scale-105":"hover:shadow-md"}`,style:{background:i.difficulty===s?a:"rgba(255, 255, 255, 0.8)",border:i.difficulty===s?"2px solid rgba(255, 255, 255, 0.3)":"2px solid rgba(148, 163, 184, 0.3)",color:i.difficulty===s?"white":"#374151"},children:t},s))})]}),!g&&e.jsx("div",{className:"mt-8 text-center",children:e.jsx("button",{onClick:ie,className:"px-6 py-3 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, #6b7280, #4b5563)"},children:r("study.skip")})})]})})]});if(L==="results"&&v){const t=h.reduce((l,n)=>{const o=C[n.id];let c=!1;if(n.question_type==="fill_in_blank"&&n.blank_answer){const N=n.blank_answer.toLowerCase().split(",").map(D=>D.trim()),F=(o||"").toString().toLowerCase().trim();c=N.includes(F)}else c=o===n.correct_answer;return c?l+1:l},0),s=h.length-t,a=J(t,h.length);return v.ended_at&&(new Date(v.ended_at).getTime()-new Date(v.started_at).getTime())/1e3,e.jsx("div",{className:"min-h-screen p-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12 p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:e.jsx(k,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:r("study.completedTitle")}),e.jsx("p",{className:"text-white/90 text-xl",children:r("study.completedDesc")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{className:"text-center p-8 rounded-3xl transition-all duration-300 transform hover:scale-105",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center mx-auto mb-4",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:e.jsx(k,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:t}),e.jsx("div",{className:"text-gray-600 font-medium",children:r("study.correctCount")})]}),e.jsxs("div",{className:"text-center p-8 rounded-3xl transition-all duration-300 transform hover:scale-105",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center mx-auto mb-4",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)"},children:e.jsx($,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:s}),e.jsx("div",{className:"text-gray-600 font-medium",children:r("study.wrongCount")})]}),e.jsxs("div",{className:"text-center p-8 rounded-3xl transition-all duration-300 transform hover:scale-105",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center mx-auto mb-4",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"},children:e.jsx(H,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"text-3xl font-bold text-gray-800 mb-2",children:h.length}),e.jsx("div",{className:"text-gray-600 font-medium",children:r("study.totalQuestions")})]}),e.jsxs("div",{className:"text-center p-8 rounded-3xl transition-all duration-300 transform hover:scale-105",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center mx-auto mb-4",style:{background:a>=70?"linear-gradient(135deg, #10b981, #059669)":a>=50?"linear-gradient(135deg, #f59e0b, #d97706)":"linear-gradient(135deg, #ef4444, #dc2626)"},children:e.jsx("span",{className:"text-white font-bold",children:"%"})}),e.jsxs("div",{className:`text-3xl font-bold mb-2 ${a>=70?"text-green-600":a>=50?"text-yellow-600":"text-red-600"}`,children:["%",a]}),e.jsx("div",{className:"text-gray-600 font-medium",children:r("study.successRate")})]})]}),e.jsxs("div",{className:"p-8 rounded-3xl mb-12",style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:r("study.perQuestionResults")}),e.jsx("div",{className:"space-y-3",children:h.map((l,n)=>{const o=C[l.id];let c=!1,N="";if(l.question_type==="fill_in_blank"&&l.blank_answer){const F=l.blank_answer.toLowerCase().split(",").map(de=>de.trim()),D=(o||"").toString().toLowerCase().trim();c=F.includes(D),N=l.blank_answer}else c=o===l.correct_answer,N=l.correct_answer;return e.jsx("div",{className:"p-6 rounded-2xl transition-all duration-300 hover:scale-[1.02]",style:{background:c?"linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1))":"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:c?"2px solid rgba(16, 185, 129, 0.3)":"2px solid rgba(239, 68, 68, 0.3)",backdropFilter:"blur(10px)"},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold mr-3",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)",color:"white"},children:["Soru ",n+1]}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-medium",style:{background:"rgba(148, 163, 184, 0.2)",color:"#475569"},children:["📚 ",l.subject]})]}),e.jsx("div",{className:"font-bold text-gray-800 mb-4 text-lg",children:l.question.length>120?`${l.question.substring(0,120)}...`:l.question}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium mr-2",children:r("study.givenAnswer")}),e.jsx("span",{className:"px-3 py-1 rounded-xl font-bold text-white",style:{background:c?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)"},children:o})]}),!c&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 font-medium mr-2",children:r("study.rightAnswer")}),e.jsx("span",{className:"px-3 py-1 rounded-xl font-bold text-white",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:N})]})]})]}),e.jsx("div",{className:"ml-6",children:e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center shadow-lg",style:{background:c?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #ef4444, #dc2626)"},children:c?e.jsx(k,{className:"w-7 h-7 text-white"}):e.jsx($,{className:"w-7 h-7 text-white"})})})]})},l.id)})})]}),e.jsx("div",{className:"p-8 rounded-3xl",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-6",children:[e.jsxs("button",{onClick:ne,className:"flex items-center px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #10b981, #059669)"},children:[e.jsx(V,{className:"w-6 h-6 mr-3"}),"🔄 ",r("study.retry")]}),s>0&&e.jsxs("button",{onClick:le,className:"flex items-center px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)"},children:[e.jsx(E,{className:"w-6 h-6 mr-3"}),r("study.retryIncorrect")," (",s,")"]}),e.jsxs("button",{onClick:()=>A("/statistics"),className:"flex items-center px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)"},children:[e.jsx(H,{className:"w-6 h-6 mr-3"}),r("study.viewStatistics")]}),e.jsx("button",{onClick:()=>{S(),A("/")},className:"flex items-center px-8 py-4 rounded-2xl font-bold text-white transition-all duration-300 transform hover:scale-105 shadow-lg",style:{background:"linear-gradient(135deg, #3b82f6, #1d4ed8)"},children:r("study.home")})]})})]})})}return null};export{Me as default};
